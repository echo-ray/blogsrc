---
title: proc目录介绍
date: 2018-12-17 12:12:28
tags:
- Linux
---

# proc是啥

Linux中proc有很多文件，但是它并不是一个文件系统。proc是内核中数据结构的接口，只不过这个接口是以文件形式呈现的，里面的文件大多数是只读。我们可以通过更改proc中的文件内容直接读取或者更改内核的某些参数。

<!--more-->

proc默认挂载到/proc下，也可以自定挂载位置

```bash
mount -t proc proc /proc
```

通常的一些统计类工具比如`ps top uptime lsblk`等都是读取的proc内的原始数据然后加点料补充一下就通过标准输出返给用户了

# proc目录结构

## 进程信息

proc目录内由大量的以进程号命名的文件夹，每个进程号文件夹内存放了该进程的一些信息，

比如我们可以通过查看进程号为240

- 进程文件位置：/proc/240/exe 文件链接
- 打的文件：/proc/240/fd 目录内文件描述符指向的文件
- 启动参数：/proc/240/cmdline
- 父进程id：/proc/240/status 中PPid
- 子进程：/proc/240/task 目录内

## 网络信息

在目录/proc/net内存放了网络方面的信息

比如文件/proc/net/arp记录了arp表的信息

文件/proc/net/nf_conntrack记录了网络连接跟踪信息，可以通过

```bash
cat /proc/net/nf_conntrack | grep ip | grep port
```
来查看源IP端口为prot的连接被nat后的IP和端口

## 内存信息

通过文件/proc/meminfo来查看

## 磁盘信息

文件/proc/diskstats

```bash
[root@com01 proc]# cat diskstats
  11       0 sr0 0 0 0 0 0 0 0 0 0 0 0
   8       0 sda 0 0 0 0 0 0 0 0 0 0 0
  11       1 sr1 0 0 0 0 0 0 0 0 0 0 0
   8      16 sdb 0 0 0 0 0 0 0 0 0 0 0
   8      32 sdc 188335 1018 36712212 592267 9760540 6826311 332488092 212036387 0 67057034 212631759
   8      33 sdc1 1852 0 11506 1004 2070 0 4316 12521 0 13440 13522
   8      34 sdc2 59 0 4528 407 0 0 0 0 0 402 407
   8      35 sdc3 186398 1018 36694082 590587 9758470 6826311 332483776 212023866 0 67044500 212656538
 253       0 dm-0 54493 0 4882986 227049 7361989 0 94685768 93684854 0 33019734 93912522
 253       1 dm-1 132859 0 31803816 511991 9230130 0 237797912 213513125 0 35143976 214032550
 253       2 dm-2 89 0 4672 535 12 0 96 114 0 560 649

```


关于该目录下的更详细的说明请参考[proc man文档](http://man7.org/linux/man-pages/man5/proc.5.html#DESCRIPTION)


